<nb-card>
    <nb-card-header>
        <span style="font-size: 2rem;">
            Event
        </span>
        <!-- <span style="font-size:2rem; float: right;">
                <button ngbButtonLabel class="btn btn-danger btn-tn" style="cursor:pointer;" (click)="popAdd(content)"><i class="fa fa-plus"></i>&nbsp;Tambah Event Baru</button>
        </span> -->
        <a [routerLink]="['/event/add']">
            <span style="font-size:2rem; float: right;">
                <button ngbButtonLabel class="btn btn-danger btn-tn" style="cursor:pointer;"><i class="fa fa-plus"></i>&nbsp;Tambah Event Baru</button>
            </span>
        </a>
    </nb-card-header>

    <nb-card-body>
        <table class="table table-bordered table-striped">
            <thead>
                <tr>
                    <th *ngIf="nameSorting === false; else sortingName" (click)="funcSortNameArray()">Nama Event &nbsp;<i class="fa fa-sort"></i></th>
                    <ng-template #sortingName>
                        <th (click)="funcSortNameArrayBenar()">Nama Event &nbsp;<i class="fa fa-sort"></i></th>
                    </ng-template>
                    <th *ngIf="joinDateSorting === false; else sortingJoinDate" (click)="funcSortJoinDateArray()"><i class="fa fa-calendar" style="color:rgb(255, 232, 23);"></i>&nbsp;Join Date &nbsp;<i class="fa fa-sort"></i></th>
                    <ng-template #sortingJoinDate>
                        <th (click)="funcSortJoinDateArrayBenar()"><i class="fa fa-calendar" style="color:rgb(255, 232, 23);"></i>&nbsp;Join Date &nbsp;<i class="fa fa-sort"></i></th>
                    </ng-template>
                    <th *ngIf="showDateSorting === false; else sortingShowDate" (click)="funcSortShowDateArray()"><i class="fa fa-calendar" style="color:rgb(255, 163, 25);"></i>&nbsp;Show Date &nbsp;<i class="fa fa-sort"></i></th>
                    <ng-template #sortingShowDate>
                        <th (click)="funcSortShowDateArrayBenar()"><i class="fa fa-calendar" style="color:rgb(255, 163, 25);"></i>&nbsp;Show Date &nbsp;<i class="fa fa-sort"></i></th>
                    </ng-template>
                    <th *ngIf="showEventSorting === false; else sortingEventDate" (click)="funcSortEventDateArray()"><i class="fa fa-calendar" style="color:rgb(255, 58, 58);"></i>&nbsp;Event Date &nbsp;<i class="fa fa-sort"></i></th>
                    <ng-template #sortingEventDate>
                        <th (click)="funcSortEventDateArrayBenar()"><i class="fa fa-calendar" style="color:rgb(255, 58, 58);"></i>&nbsp;Event Date &nbsp;<i class="fa fa-sort"></i></th>
                    </ng-template>
                    <!-- <th>Quantity&nbsp;<i class="fa fa-align-justify"></i></th> -->
                    <th>ACTION&nbsp;<i class="fa fa-angle-double-right"></i></th>
                </tr>
            </thead>
            <tbody [nbSpinner]="loading" nbSpinnerStatus="warning" nbSpinnerSize="xxlarge">
                <tr>
                    <td><input class="form-control" placeholder="Search Event Name" [(ngModel)]="name"></td>
                    <td><input class="form-control" placeholder="Search Join Date" [(ngModel)]="joinDate"></td>
                    <td><input class="form-control" placeholder="Search Show Date" [(ngModel)]="showDate"></td>
                    <td><input class="form-control" placeholder="Search Event Date" [(ngModel)]="eventDate"></td>
                    <!-- <td></td> -->
                    <td></td>
                </tr>
                <div *ngIf="title; else please">
                    The user is logged in.
                </div>
                <ng-template #please>
                    <ng-container *ngFor="let item of listEvent.content | searchPipe:'eventName':name | searchPipe:'joinEventStartDate':joinDate | searchPipe:'showEventStartDate':showDate | searchPipe:'eventStartDate':eventDate">
                        <tr (click)="openCloseRow(item.id)">
                            <td>{{ item.eventName }}</td>
                            <td>{{ item.joinEventStartDate | date:'longDate' }}</td>
                            <td>{{ item.showEventStartDate | date:'longDate' }}</td>
                            <td>{{ item.eventStartDate | date:'longDate' }}</td>
                            <!-- <td>{{ item.qty }}</td> -->
                            <td>
                                <div class="action">
                                    <div (click)="goToEdit(item.id)">
                                        <i class="fa fa-edit fa-lg" style="padding-left:2rem;padding:1rem;cursor:pointer;"></i>
                                    </div>
                                    <div (click)="deleteEvent(item.id)">
                                        <i class="fa fa-trash fa-lg" style="padding:1rem;cursor:pointer;"></i>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        <tr *ngIf="rowSelected==item.id">
                            <td colspan="6">
                                <table class="table">
                                    <tbody>
                                        <tr>
                                            <th>Event</th>
                                            <th>Product</th>
                                        </tr>
                                        <tr>
                                            <td>
                                                <!-- <b>Nama:</b> {{ item.eventName }}<br><br> -->
                                                <h1>{{ item.eventName }}</h1> <br>
                                                <b>Join Date</b> <br>
                                                Start on {{ item.joinEventStartDate| date:'longDate' }}<br>
                                                End on {{ item.joinEventEndDate| date:'longDate' }}<br><br>
                                                <b>Show Date</b> <br>
                                                Start on {{ item.showEventStartDate| date:'longDate' }}<br>
                                                End on {{ item.showEventEndDate| date:'longDate' }}<br><br>
                                                <b>Event Date</b> <br>
                                                Start on {{ item.eventStartDate| date:'longDate' }}<br>
                                                End on {{ item.eventEndDate| date:'longDate' }}<br><br>
                                            </td>
                                            <td>
                                                <div class="button-add-product">
                                                    <button ngbButtonLabel class="btn btn-success btn-tn button-add-product" style="cursor:pointer;" (click)="addProduct(content,id)"><i class="fa fa-plus"></i>&nbsp;Add Product</button>
                                                    <!-- <button>Product List</button> -->
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>    
                                </table>        
                            </td>
                        </tr>
                    </ng-container>
                </ng-template>
            </tbody>
        </table>

        <div class="paging">
            <ul>
                <li>
                    <a (click)="setPage(1)" [ngClass]="{disabled:currentPage == 1}">First</a>
                </li>
                <li>
                    <a (click)="setPage(currentPage, -1)" [ngClass]="{disabled:(currentPage-1) < 1}">Previous</a>
                </li>
                <li *ngFor="let p of pages">
                    <a (click)="setPage(p)" [ngClass]="currentPage == p?'current-page':''">{{p}}</a>
                </li>
                <li>
                    <a (click)="setPage(currentPage, +1)" [ngClass]="{disabled:currentPage == lastPage}">Next</a>
                </li>
                <li>
                    <a (click)="setPage(lastPage)" [ngClass]="{disabled:currentPage == lastPage}">Last</a>
                </li>
            </ul>
        </div>
    </nb-card-body>
</nb-card>

<ng-template #content let-c="close" let-d="dismiss">
        <div class="modal-header">
            <h4 class="modal-title">Add Product</h4>
            <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <table class="table table-bordered table-striped">
            <tr>
                <td></td>
                <td>
                    <input class="form-control" placeholder="Search Name" (keyup)="searchK($event)">
                </td>
            </tr>

            <tr *ngFor="let obj of listProduct" (click)="openLg(content, obj.productId)">
                <td> <img class="item__cusotmese__image" src="{{obj.imageUrl[0]}}"></td>
                <td class="td__cusotmese__image">
                    <p> {{ obj.name }}</p>
                </td>
            </tr>

            <tr *ngIf="rowSelected==obj.productId">
                    <td colspan="6">
                        <table class="table">
                            <thead>
                                <th>Variant</th>
                                <th>Quantity</th>
                            </thead>
                            <tbody>
                                <tr>
                                    <!-- <div *ngFor="let it of item.services">
                                        <div *ngIf="it.isUse==true">
                                            <input type="checkbox" checked (click)="check(it.courierId, it.courierServiceId)"> {{it.name}} 
                                        </div>
                                        <div *ngIf="it.isUse==false">
                                            <input type="checkbox" (click)="check(it.courierId, it.courierServiceId)"> {{it.name}}
                                        </div>
                                    </div>-->
                                    <td></td>
                                </tr>
                            </tbody>    
                        </table>        
                    </td>
                </tr>
        </table>
        <!-- <div class="paging">
            <ul>
                <li>
                    <a (click)="setPage(1)" [ngClass]="{disabled:currentPage == 1}">First</a>
                </li>
                <li>
                    <a (click)="setPage(currentPage, -1)" [ngClass]="{disabled:(currentPage-1) < 1}">Previous</a>
                </li>
                <li *ngFor="let p of pages">
                    <a (click)="setPage(p)" [ngClass]="currentPage == p?'current-page':''">{{p}}</a>
                </li>
                <li>
                    <a (click)="setPage(currentPage, +1)" [ngClass]="{disabled:currentPage == lastPage}">Next</a>
                </li>
                <li>
                    <a (click)="setPage(lastPage)" [ngClass]="{disabled:currentPage == lastPage}">Last</a>
                </li>
            </ul>
        </div> -->
            
</ng-template>

<!-- <ng-template #content let-c="close" let-d="dismiss">
    <div class="modal-header">
        <h4 class="modal-title">Create Event</h4>
        <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
        <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div>
        <form class="ui form" [formGroup]="addEventForm" (ngSubmit)="onSubmit()">
            <!-- <div class="add-product-form-wrapper">
                <ul class="add_product_image clearfix" id="image-list">
                    <li class="u-inline-list-gap" *ngFor="let item of f.imageUrl.value; let i = index">
                        <div class="image-preview" [ngStyle]="{'background-image': 'url(' + item + ')'}">
                            <span class="action-button" (click)="removeImage(i)">
                                <i class="fa fa-trash"></i>
                            </span>
                        </div>
                    </li>
                    <li>
                        <div class="pikcker-wrapper picker-add-image" *ngIf="(f.imageUrl.value.length < 5)">
                            <input type="file"  accept="image/jpeg,.jpeg,.jpg,image/png,.png" (change)="getSelectedFiles($event)">
                        </div>
                    </li>
                </ul>
            </div> 
            
            <div class="row f-group">
                <label class="col-2 middle">Event Name</label>
                <div class="col-10">
                    <input type="text" formControlName="eventName" class="f-control form-control" placeholder="Event Name">
                </div>  
            </div>
            
            <div class="row f-group">
                <label class="col-2 middle">Join Time</label>
                <div class="col-5">
                    <my-date-picker class="frame-date" name="mydate" formControlName="joinEventStartDate" placeholder="start"></my-date-picker>
                </div>
                <div class="col-5">
                    <my-date-picker class="frame-date" name="mydate" formControlName="joinEventEndDate" placeholder="end"></my-date-picker>
                </div>
            </div>
            <div class="row f-group">
                <label class="col-2 middle">Show Time</label>
                <div class="col-5">
                    <my-date-picker class="frame-date" name="mydate" formControlName="showEventStartDat" placeholder="start"></my-date-picker>
                </div>
                <div class="col-5">
                    <my-date-picker class="frame-date" name="mydate" formControlName="showEventEndDate" placeholder="end"></my-date-picker>
                </div>
            </div>
            <div class="row f-group">
                <label class="col-2 middle">Event Time</label>
                <div class="col-5">
                    <my-date-picker class="frame-date" name="mydate" formControlName="eventStartDate" placeholder="start"></my-date-picker>
                </div>
                <div class="col-5">
                    <my-date-picker class="frame-date" name="mydate" formControlName="eventEndDate" placeholder="end"></my-date-picker>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-sm btn-danger btn-click close" (click)="d('Cross click')">BATAL</button>
                <button class="btn btn-sm btn-success btn-click" [disabled]="addEventForm.invalid">SUBMIT</button>
            </div>
        </form>
    </div>
    <!-- <div *ngIf="isSuccess==true">
        <div class="modal-body">
            Withdrawal berhasil diproses.
        </div>
        <div class="modal-footer">
            <button class="btn btn-sm btn-danger btn-click close" (click)="d('Cross click')">TUTUP</button>
        </div>
    </div> -->
    <!-- <div *ngIf="isError==true">
        <div class="modal-body">
            Withdrawal gagal diproses!
        </div>
        <div class="modal-footer">
            <button class="btn btn-sm btn-danger btn-click close" (click)="d('Cross click')">TUTUP</button>
        </div>
    </div> 
    
</ng-template> -->